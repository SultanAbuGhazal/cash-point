<div id="container" class="d-flex flex-column">

    <div class="mt-auto" style="padding: 2px">
        
        <div ngbDropdown class="d-inline-block float-right ml-1">
            <button class="btn btn-outline-primary btn-lg" id="dropdownBasic1" ngbDropdownToggle>Saved ({{ savedSales.length }})</button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <div *ngIf="!savedSales.length" class="text-center"><em>Empty </em></div>
                <button *ngFor="let sale of savedSales; index as i" (click)="selectSavedSale(i)" ngbDropdownItem>{{ sale.title }}</button>
            </div>
        </div>
        <button type="button" class="btn btn-secondary btn-lg" [disabled]="!this.saleTotal" (click)="saveSale()">Save</button>
        <button type="button" class="btn btn-danger btn-lg ml-1" (click)="clearSale()">del</button>

    </div>

    <div class="flex-fill" style="overflow-y: auto;">

        <!-- Sale Items List -->
        <div *ngFor="let item of saleItems; index as i" class="d-flex sale-item">
            <div class="p-2 delete-button" (click)="onDeleteClick(i)">
                <img src="assets/icons/criss-cross.png" width="22">
            </div>
            <div class="p-2 w-50" style="text-overflow: hidden;">{{ item.item.description  }}</div>
            <div class="p-2 flex-grow-1">
                <img src="assets/icons/remove.png" width="36" (click)="onDecreaseClick(i)">
                <span class="p-2">&nbsp;{{ item.quantity }}&nbsp;</span>
                <img src="assets/icons/add.png" width="36" (click)="onIncreaseClick(i)">
            </div>
            <div class="p-2">{{ item.item.selling_price * item.quantity | number: '1.2-2'  }}</div>
        </div>

        <!-- Empty Cart Icon -->
        <div *ngIf="saleItems.length === 0" class="d-flex justify-content-center text-center" style="height: 100%;">
            <div class="align-self-center">
                <img src="assets/icons/empty-box.png" style="width: 80%; height: auto; opacity: 40%;">
            </div>
        </div>
    </div>

    <div class="p-2 mt-auto" style="border-top: 1px solid lightgrey">
        <div class="d-flex mb-1">
            <div class="mr-auto"><h2>Total</h2></div>
            <div class="text-right">
                <h2>{{ saleTotal | number: '1.2-2' }}</h2>
            </div>
        </div>
        <div class="d-flex mb-1">
            <div class="mr-auto">
                <h5>VAT</h5>
                <h5>Subtotal</h5>
            </div>
            <div class="text-right">
                <h5>{{ saleVatAmount | number: '1.2-2' }}</h5>
                <h5>{{ saleSubtotal | number: '1.2-2' }}</h5>
            </div>
        </div>
    </div>

    <div class="p-2 mt-auto">
        <div class="btn-group btn-group-lg btn-block" role="group">
            <button type="button" class="btn btn-success btn-lg" [disabled]="!this.saleTotal" (click)="onCashClick()">Cash</button>
            <button type="button" class="btn btn-secondary btn-lg" [disabled]="!this.saleTotal" (click)="onCreditClick()">Credit</button>
        </div>
    </div>
</div>
